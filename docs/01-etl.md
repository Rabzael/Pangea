# Log ETL

|          |      |
|----------|------|
| Language | Rust |
| Version  |  1   |

A simple batch ETL that:
- Extract: reads a log file from [proxy](./00-proxy.md), where each line is a JSON object.
- Transform: removes an unnecessary field and converts the data to the [Arrow format](https://arrow.apache.org/overview/).
- Load: writes the result as an Arrow record batch file (see the [Arrow columnar format](https://arrow.apache.org/docs/format/Columnar.html#recordbatch-message)).

## How to use

#### Arguments
- **batch size** number of log lines to process before writing to output file
- **input_logfile** path to the log file to process (use the one generated by the proxy)
- **output_file** path where the processed output will be written

#### Run with Cargo (for development)...
Run directly: 
```bash
cargo run -- <batch size> <input_logfile> <output_file>
```

#### ...or build and run as a standalone executable
```bash
cargo build --release
./target/release/etl <batch size> <input_logfile> <output_file>
```